{"ast":null,"code":"import axios from \"axios\";\n\n// Tạo một baseURL nhất quán cho API\nconst BASE_URL = \"http://localhost:3001/api\";\n\n// Tạo instance cho API chính và cho AUTH API\nconst API = axios.create({\n  baseURL: BASE_URL\n});\nconst AUTH_API = axios.create({\n  baseURL: `${BASE_URL}/auth`\n});\n\n// Interceptor để thêm token vào tất cả các request nếu có\nAPI.interceptors.request.use(req => {\n  const profile = localStorage.getItem(\"profile\");\n  if (profile) {\n    var _JSON$parse;\n    req.headers.Authorization = `Bearer ${(_JSON$parse = JSON.parse(profile)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.accessToken}`;\n  }\n  return req;\n}, error => {\n  return Promise.reject(error);\n});\n\n// AUTH API không cần token khi login và register\nAUTH_API.interceptors.request.use(req => {\n  const profile = localStorage.getItem(\"profile\");\n  if (profile) {\n    var _JSON$parse2;\n    req.headers.Authorization = `Bearer ${(_JSON$parse2 = JSON.parse(profile)) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.accessToken}`;\n  }\n  return req;\n}, error => {\n  return Promise.reject(error);\n});\n\n// AUTH actions\nexport const login = formData => AUTH_API.post(\"/login\", formData);\nexport const register = formData => AUTH_API.post(\"/register\", formData);\n\n// User actions\nexport const fetchUsers = () => API.get(\"/users\");\nexport const createUser = newUser => API.post(\"/users\", newUser);\nexport const updateUser = (id, updatedUser) => API.patch(`/users/${id}`, updatedUser);\nexport const deleteUser = id => API.delete(`/users/${id}`);\n\n// Quiz actions\nexport const fetchQuizes = () => API.get(\"/quizes\");\nexport const fetchPublicQuizes = page => {\n  console.log(`Fetching public quizzes from page: ${page}`);\n  return API.get(`/quizes/public?page=${page}`);\n};\nexport const fetchQuizesBySearch = searchQuery => API.get(`/quizes/search?searchQuery=${searchQuery.search || \"none\"}&tags=${searchQuery.tags}`);\nexport const fetchTeacherQuizes = teacherId => API.get(`/quizes/teacher/${teacherId}`);\nexport const fetchQuestions = quizId => API.get(`/quizes/${quizId}`);\nexport const createQuiz = newQuiz => API.post(\"/quizes\", newQuiz);\nexport const createQuestion = (quizId, newQuestion) => API.post(`/quizes/${quizId}/questions`, newQuestion);\nexport const updateQuestion = (quizId, questionId, updatedQuestion) => API.patch(`/quizes/${quizId}/questions/${questionId}`, updatedQuestion);\nexport const updateQuiz = (id, updatedQuiz) => API.patch(`/quizes/${id}`, updatedQuiz);\nexport const deleteQuiz = id => API.delete(`/quizes/${id}`);\nexport const likeQuiz = id => API.patch(`/quizes/${id}/likeQuiz`);\nexport const commentQuiz = (comment, id) => API.post(`/quizes/${id}/commentQuiz`, {\n  comment\n});\nexport const fetchQuiz = id => API.get(`/quizes/${id}`, id);\n\n// Game actions\nexport const createGame = newGame => API.post(\"/games\", newGame);\nexport const fetchGame = id => API.get(`/games/${id}`, id);\nexport const addPlayer = (gameId, playerId) => API.patch(`/games/${gameId}/players`, {\n  playerId\n});\n\n// Player Result actions\nexport const createPlayerResult = newPlayerResult => API.post(\"/playerResults\", newPlayerResult);\nexport const fetchPlayerResult = id => API.get(`/playerResults/${id}`, id);\nexport const addAnswer = (newAnswer, id) => API.patch(`/playerResults/${id}/answers`, {\n  newAnswer\n});\n\n// Leaderboard actions\nexport const createLeaderboard = newLeaderboard => API.post(\"/leaderboard\", newLeaderboard);\nexport const fetchLeaderboard = id => API.get(`/leaderboard/${id}`, id);\nexport const addPlayerResult = (playerResult, id) => API.patch(`/leaderboard/${id}/playerresult`, playerResult);\nexport const updateQuestionLeaderboard = (questionResult, id) => API.patch(`/leaderboard/${id}/questionleaderboard`, questionResult);\nexport const updateCurrentLeaderboard = (result, id) => API.patch(`/leaderboard/${id}/currentleaderboard`, result);","map":{"version":3,"names":["axios","BASE_URL","API","create","baseURL","AUTH_API","interceptors","request","use","req","profile","localStorage","getItem","_JSON$parse","headers","Authorization","JSON","parse","accessToken","error","Promise","reject","_JSON$parse2","login","formData","post","register","fetchUsers","get","createUser","newUser","updateUser","id","updatedUser","patch","deleteUser","delete","fetchQuizes","fetchPublicQuizes","page","console","log","fetchQuizesBySearch","searchQuery","search","tags","fetchTeacherQuizes","teacherId","fetchQuestions","quizId","createQuiz","newQuiz","createQuestion","newQuestion","updateQuestion","questionId","updatedQuestion","updateQuiz","updatedQuiz","deleteQuiz","likeQuiz","commentQuiz","comment","fetchQuiz","createGame","newGame","fetchGame","addPlayer","gameId","playerId","createPlayerResult","newPlayerResult","fetchPlayerResult","addAnswer","newAnswer","createLeaderboard","newLeaderboard","fetchLeaderboard","addPlayerResult","playerResult","updateQuestionLeaderboard","questionResult","updateCurrentLeaderboard","result"],"sources":["D:/WORKSPACE/DOAN2/Quiz Battle/client/src/api/index.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// Tạo một baseURL nhất quán cho API\r\nconst BASE_URL = \"http://localhost:3001/api\";\r\n\r\n// Tạo instance cho API chính và cho AUTH API\r\nconst API = axios.create({ baseURL: BASE_URL });\r\nconst AUTH_API = axios.create({ baseURL: `${BASE_URL}/auth` });\r\n\r\n// Interceptor để thêm token vào tất cả các request nếu có\r\nAPI.interceptors.request.use((req) => {\r\n  const profile = localStorage.getItem(\"profile\");\r\n  if (profile) {\r\n    req.headers.Authorization = `Bearer ${JSON.parse(profile)?.accessToken}`;\r\n  }\r\n  return req;\r\n}, (error) => {\r\n  return Promise.reject(error);\r\n});\r\n\r\n// AUTH API không cần token khi login và register\r\nAUTH_API.interceptors.request.use((req) => {\r\n  const profile = localStorage.getItem(\"profile\");\r\n  if (profile) {\r\n    req.headers.Authorization = `Bearer ${JSON.parse(profile)?.accessToken}`;\r\n  }\r\n  return req;\r\n}, (error) => {\r\n  return Promise.reject(error);\r\n});\r\n\r\n// AUTH actions\r\nexport const login = (formData) => AUTH_API.post(\"/login\", formData);\r\nexport const register = (formData) => AUTH_API.post(\"/register\", formData);\r\n\r\n// User actions\r\nexport const fetchUsers = () => API.get(\"/users\");\r\nexport const createUser = (newUser) => API.post(\"/users\", newUser);\r\nexport const updateUser = (id, updatedUser) => API.patch(`/users/${id}`, updatedUser);\r\nexport const deleteUser = (id) => API.delete(`/users/${id}`);\r\n\r\n// Quiz actions\r\nexport const fetchQuizes = () => API.get(\"/quizes\");\r\nexport const fetchPublicQuizes = (page) => {\r\n  console.log(`Fetching public quizzes from page: ${page}`);\r\n  return API.get(`/quizes/public?page=${page}`);\r\n};\r\nexport const fetchQuizesBySearch = (searchQuery) =>\r\n  API.get(`/quizes/search?searchQuery=${searchQuery.search || \"none\"}&tags=${searchQuery.tags}`);\r\nexport const fetchTeacherQuizes = (teacherId) => API.get(`/quizes/teacher/${teacherId}`);\r\nexport const fetchQuestions = (quizId) => API.get(`/quizes/${quizId}`);\r\nexport const createQuiz = (newQuiz) => API.post(\"/quizes\", newQuiz);\r\nexport const createQuestion = (quizId, newQuestion) => API.post(`/quizes/${quizId}/questions`, newQuestion);\r\nexport const updateQuestion = (quizId, questionId, updatedQuestion) =>\r\n  API.patch(`/quizes/${quizId}/questions/${questionId}`, updatedQuestion);\r\nexport const updateQuiz = (id, updatedQuiz) => API.patch(`/quizes/${id}`, updatedQuiz);\r\nexport const deleteQuiz = (id) => API.delete(`/quizes/${id}`);\r\nexport const likeQuiz = (id) => API.patch(`/quizes/${id}/likeQuiz`);\r\nexport const commentQuiz = (comment, id) => API.post(`/quizes/${id}/commentQuiz`, { comment });\r\nexport const fetchQuiz = (id) => API.get(`/quizes/${id}`, id);\r\n\r\n// Game actions\r\nexport const createGame = (newGame) => API.post(\"/games\", newGame);\r\nexport const fetchGame = (id) => API.get(`/games/${id}`, id);\r\nexport const addPlayer = (gameId, playerId) => API.patch(`/games/${gameId}/players`, { playerId });\r\n\r\n// Player Result actions\r\nexport const createPlayerResult = (newPlayerResult) => API.post(\"/playerResults\", newPlayerResult);\r\nexport const fetchPlayerResult = (id) => API.get(`/playerResults/${id}`, id);\r\nexport const addAnswer = (newAnswer, id) => API.patch(`/playerResults/${id}/answers`, { newAnswer });\r\n\r\n// Leaderboard actions\r\nexport const createLeaderboard = (newLeaderboard) => API.post(\"/leaderboard\", newLeaderboard);\r\nexport const fetchLeaderboard = (id) => API.get(`/leaderboard/${id}`, id);\r\nexport const addPlayerResult = (playerResult, id) => API.patch(`/leaderboard/${id}/playerresult`, playerResult);\r\nexport const updateQuestionLeaderboard = (questionResult, id) =>\r\n  API.patch(`/leaderboard/${id}/questionleaderboard`, questionResult);\r\nexport const updateCurrentLeaderboard = (result, id) =>\r\n  API.patch(`/leaderboard/${id}/currentleaderboard`, result);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}