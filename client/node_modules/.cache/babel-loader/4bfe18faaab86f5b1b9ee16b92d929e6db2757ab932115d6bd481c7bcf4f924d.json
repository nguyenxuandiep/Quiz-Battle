{"ast":null,"code":"var _jsxFileName = \"D:\\\\WORKSPACE\\\\DOAN2\\\\Quiz Battle\\\\client\\\\src\\\\pages\\\\Game\\\\JoinGame\\\\JoinGame.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CircularProgress } from \"@mui/material\";\nimport { createPlayerResult } from \"../../../actions/playerResult\";\nimport { addPlayer } from \"../../../actions/game\";\nimport styles from \"./joinGame.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction JoinGame() {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n  const dispatch = useDispatch();\n  const [isPlayerAdded, setIsPlayerAdded] = useState(false);\n  const pinRef = useRef(\"\");\n  const navigate = useNavigate();\n  const socket = useSelector(state => state.socket.socket);\n  useEffect(() => {\n    socket === null || socket === void 0 ? void 0 : socket.on(\"move-to-game-page\", gameId => {\n      dispatch(createPlayerResult({\n        playerId: user.result._id,\n        gameId: gameId,\n        score: 0,\n        answers: []\n      }));\n      navigate(`/games/player/${gameId}`);\n    });\n  }, [socket, dispatch, navigate, user.result._id]);\n  const result = (message, playerId, gameId) => {\n    if (message === \"correct\") {\n      dispatch(addPlayer(gameId, playerId));\n      setIsPlayerAdded(true);\n    } else {\n      alert(\"Podałeś zły pin lub gra nie istnieje\");\n    }\n  };\n  const joinGame = () => {\n    socket.emit(\"add-player\", user.result, socket.id, pinRef.current.value, (message, playerId, gameId) => {\n      result(message, playerId, gameId);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.page,\n    children: !isPlayerAdded ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.section,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Join game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ref: pinRef,\n        placeholder: \"Write here a pin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: joinGame,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.section,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"You joined the game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Waiting on a host to start the game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(JoinGame, \"VKD1sgG9PCZyfwaCJVLU2ZUVpRc=\", false, function () {\n  return [useDispatch, useNavigate, useSelector];\n});\n_c = JoinGame;\nexport default JoinGame;\nvar _c;\n$RefreshReg$(_c, \"JoinGame\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","useDispatch","useSelector","CircularProgress","createPlayerResult","addPlayer","styles","jsxDEV","_jsxDEV","JoinGame","_s","user","JSON","parse","localStorage","getItem","dispatch","isPlayerAdded","setIsPlayerAdded","pinRef","navigate","socket","state","on","gameId","playerId","result","_id","score","answers","message","alert","joinGame","emit","id","current","value","className","page","children","section","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","placeholder","onClick","_c","$RefreshReg$"],"sources":["D:/WORKSPACE/DOAN2/Quiz Battle/client/src/pages/Game/JoinGame/JoinGame.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { CircularProgress } from \"@mui/material\"\r\nimport { createPlayerResult } from \"../../../actions/playerResult\"\r\nimport { addPlayer } from \"../../../actions/game\"\r\nimport styles from \"./joinGame.module.scss\"\r\n\r\n\r\nfunction JoinGame() {\r\n  const user = JSON.parse(localStorage.getItem(\"profile\"))\r\n  const dispatch = useDispatch()\r\n  const [isPlayerAdded, setIsPlayerAdded] = useState(false)\r\n  const pinRef = useRef(\"\")\r\n  const navigate = useNavigate()\r\n  const socket = useSelector((state) => state.socket.socket)\r\n\r\n  useEffect(()=>{\r\n    socket?.on(\"move-to-game-page\", (gameId) => {\r\n      dispatch(\r\n        createPlayerResult({\r\n          playerId: user.result._id,\r\n          gameId: gameId,\r\n          score: 0,\r\n          answers: [],\r\n        })\r\n      )\r\n      navigate(`/games/player/${gameId}`)\r\n    })\r\n  }, [socket, dispatch, navigate, user.result._id])\r\n\r\n  const result = (message, playerId, gameId) => {\r\n    if (message === \"correct\") {\r\n      dispatch(addPlayer(gameId, playerId))\r\n      setIsPlayerAdded(true)\r\n    } else {\r\n      alert(\"Podałeś zły pin lub gra nie istnieje\")\r\n    }\r\n  }\r\n\r\n  const joinGame = () => {\r\n    socket.emit(\r\n      \"add-player\",\r\n      user.result,\r\n      socket.id,\r\n      pinRef.current.value,\r\n      (message, playerId, gameId) => {\r\n        result(message, playerId, gameId)\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={styles.page}>\r\n      {!isPlayerAdded ? (\r\n        <div className={styles.section}>\r\n          <h2>Join game</h2>\r\n          <input\r\n            type=\"text\"\r\n            ref={pinRef}\r\n            placeholder= 'Write here a pin'\r\n          />\r\n          <button onClick={joinGame}>\r\n          Send\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className={styles.section}>\r\n          <h2>\r\n          You joined the game\r\n          </h2>\r\n          <h4>\r\n          Waiting on a host to start the game\r\n          </h4>\r\n          <CircularProgress />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default JoinGame\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}